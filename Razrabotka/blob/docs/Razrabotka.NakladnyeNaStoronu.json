{
  "periodictype": "ForAllDocumentsThatType",
  "autonumerizer": true,
  "numeratortype": "Text",
  "length": 24,
  "uniquecontrol": true,
  "acceptaccountingprocessing": true,
  "automovedeletion": true,
  "autorownumerizer": true,
  "accounting": false,
  "calculation": false,
  "operationalaccounting": false,
  "createoperation": "Always",
  "headerrequsites": [
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.DataUcheta",
        "title": {
          "ru_RU": "Дата учета",
          "en_EN": "Data ucheta"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.date"
      },
      "properties": {},
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.Summa",
        "title": {
          "ru_RU": "Сумма",
          "en_EN": "Summa"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.real"
      },
      "properties": {
        "precision": "2",
        "length": "14",
        "unsigned": "false"
      },
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.BankovskieRekvizityUchetnoiiOrganizacii",
        "title": {
          "ru_RU": "Банковские реквизиты учетной организации",
          "en_EN": "Bankovskie rekvizity uchetnoii organizacii"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.BankovskieRekvizityUchetnoiiOrganizacii"
      },
      "properties": {},
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.MOL",
        "title": {
          "ru_RU": "МОЛ",
          "en_EN": "MOL"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.Sotrudniki"
      },
      "properties": {},
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.Podrazdelenie",
        "title": {
          "ru_RU": "Подразделение",
          "en_EN": "Podrazdelenie"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.Podrazdeleniya"
      },
      "properties": {},
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.Poluchatel",
        "title": {
          "ru_RU": "Получатель",
          "en_EN": "Poluchatel"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.Kontragenty"
      },
      "properties": {},
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.BankovskieRekvizityKontragenta",
        "title": {
          "ru_RU": "Банковские реквизиты контрагента",
          "en_EN": "Bankovskie rekvizity kontragenta"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.BankovskieRekvizityKontragenta"
      },
      "properties": {},
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.Gruzootpravitelkontragent",
        "title": {
          "ru_RU": "Грузоотправитель-контрагент",
          "en_EN": "Gruzootpravitelkontragent"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.Kontragenty"
      },
      "properties": {},
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.Gruzopoluchatel",
        "title": {
          "ru_RU": "Грузополучатель",
          "en_EN": "Gruzopoluchatel"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.Kontragenty"
      },
      "properties": {},
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.Operaciya",
        "title": {
          "ru_RU": "Операция",
          "en_EN": "Operaciya"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.Operacii"
      },
      "properties": {},
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.Osnovanie",
        "title": {
          "ru_RU": "Основание",
          "en_EN": "Osnovanie"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.text"
      },
      "properties": {
        "unlimited": "false",
        "length": "300"
      },
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.CHerezKogo",
        "title": {
          "ru_RU": "Через кого",
          "en_EN": "CHerez kogo"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.text"
      },
      "properties": {
        "unlimited": "false",
        "length": "300"
      },
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.Doverennost",
        "title": {
          "ru_RU": "Доверенность",
          "en_EN": "Doverennost"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.text"
      },
      "properties": {
        "unlimited": "false",
        "length": "300"
      },
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.TransportnayaNakladnaya",
        "title": {
          "ru_RU": "Транспортная накладная",
          "en_EN": "Transportnaya nakladnaya"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.text"
      },
      "properties": {
        "unlimited": "false",
        "length": "300"
      },
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.hr.Komissiya",
        "title": {
          "ru_RU": "Комиссия",
          "en_EN": "Komissiya"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.Komissii"
      },
      "properties": {},
      "required": false
    }
  ],
  "tablerequsites": [
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.Operaciya",
        "title": {
          "ru_RU": "Операция",
          "en_EN": "Operaciya"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.Operacii"
      },
      "properties": {},
      "required": true
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.TMC",
        "title": {
          "ru_RU": "ТМЦ",
          "en_EN": "TMC"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.MaterialnyeZapasy"
      },
      "properties": {},
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.EdinicaIzmereniya",
        "title": {
          "ru_RU": "Единица измерения",
          "en_EN": "Edinica izmereniya"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.EdinicyIzmereniyaOKEI"
      },
      "properties": {},
      "required": false
    },
    {
      "istotal": false,
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.Kolichestvo",
        "title": {
          "ru_RU": "Количество",
          "en_EN": "Kolichestvo"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.real"
      },
      "properties": {
        "precision": "4",
        "length": "18",
        "unsigned": "false"
      },
      "required": false
    },
    {
      "istotal": false,
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.Cena",
        "title": {
          "ru_RU": "Цена",
          "en_EN": "Cena"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.real"
      },
      "properties": {
        "precision": "2",
        "length": "14",
        "unsigned": "false"
      },
      "required": false
    },
    {
      "istotal": false,
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.CenaPostavshika",
        "title": {
          "ru_RU": "Цена поставщика",
          "en_EN": "Cena postavshika"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.real"
      },
      "properties": {
        "precision": "2",
        "length": "14",
        "unsigned": "false"
      },
      "required": false
    },
    {
      "istotal": false,
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.Sebestoimost",
        "title": {
          "ru_RU": "Себестоимость",
          "en_EN": "Sebestoimost"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.real"
      },
      "properties": {
        "precision": "2",
        "length": "14",
        "unsigned": "false"
      },
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.KVFO",
        "title": {
          "ru_RU": "КВФО",
          "en_EN": "KVFO"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.KFO"
      },
      "properties": {},
      "required": true
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.KPSDb",
        "title": {
          "ru_RU": "КПС дб",
          "en_EN": "KPS db"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.KPS"
      },
      "properties": {},
      "required": true
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.Debet",
        "title": {
          "ru_RU": "Дебет",
          "en_EN": "Debet"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.account"
      },
      "properties": {
        "showanalytic": "true"
      },
      "required": true
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.KOSGUDb",
        "title": {
          "ru_RU": "КОСГУ дб",
          "en_EN": "KOSGU db"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.KOSGUEKR"
      },
      "properties": {},
      "required": true
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.KPSKr",
        "title": {
          "ru_RU": "КПС кр",
          "en_EN": "KPS kr"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.KPS"
      },
      "properties": {},
      "required": true
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.Kredit",
        "title": {
          "ru_RU": "Кредит",
          "en_EN": "Kredit"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.account"
      },
      "properties": {
        "showanalytic": "true"
      },
      "required": true
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.KOSGUKr",
        "title": {
          "ru_RU": "КОСГУ кр",
          "en_EN": "KOSGU kr"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.KOSGUEKR"
      },
      "properties": {},
      "required": true
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.Tovaroproizvoditel",
        "title": {
          "ru_RU": "Товаропроизводитель",
          "en_EN": "Tovaroproizvoditel"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.Strany"
      },
      "properties": {},
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.NGTD",
        "title": {
          "ru_RU": "№ ГТД",
          "en_EN": "№ GTD"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.text"
      },
      "properties": {
        "unlimited": "false",
        "length": "300"
      },
      "required": false
    },
    {
      "istotal": false,
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.AkcizVTch",
        "title": {
          "ru_RU": "Акциз в т.ч.",
          "en_EN": "Akciz v tch"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.real"
      },
      "properties": {
        "precision": "2",
        "length": "14",
        "unsigned": "false"
      },
      "required": false
    },
    {
      "istotal": false,
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.CenaSNDS",
        "title": {
          "ru_RU": "Цена с НДС",
          "en_EN": "Cena s NDS"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.real"
      },
      "properties": {
        "precision": "2",
        "length": "14",
        "unsigned": "false"
      },
      "required": false
    },
    {
      "istotal": false,
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.SummaBezNDS",
        "title": {
          "ru_RU": "Сумма без НДС",
          "en_EN": "Summa bez NDS"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.real"
      },
      "properties": {
        "precision": "2",
        "length": "14",
        "unsigned": "false"
      },
      "required": false
    },
    {
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.NDS",
        "title": {
          "ru_RU": "НДС%",
          "en_EN": "NDS"
        },
        "description": {}
      },
      "type": {
        "mnemo": "Razrabotka.StavkiNDS"
      },
      "properties": {},
      "required": false
    },
    {
      "istotal": false,
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.SummaNDS",
        "title": {
          "ru_RU": "Сумма НДС",
          "en_EN": "Summa NDS"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.real"
      },
      "properties": {
        "precision": "2",
        "length": "14",
        "unsigned": "false"
      },
      "required": false
    },
    {
      "istotal": false,
      "meta": {
        "mnemo": "Razrabotka.NakladnyeNaStoronu.tr.VsegoSNDS",
        "title": {
          "ru_RU": "Всего с НДС",
          "en_EN": "Vsego s NDS"
        },
        "description": {}
      },
      "type": {
        "mnemo": "primitive.real"
      },
      "properties": {
        "precision": "2",
        "length": "14",
        "unsigned": "false"
      },
      "required": false
    }
  ],
  "basedondocuments": {
    "isthebasis": [],
    "maybethebasisforanykind": false
  },
  "formdescription": {
    "script": {
      "title": "script",
      "sources": ""
    }
  },
  "formdocument": {
    "script": {
      "title": "script",
      "sources": ""
    }
  },
  "script": {
    "title": "Скрипт документа Накладные на сторону",
    "sources": "function baseOn(base, targetMnemo){\r\n    let baseMnemo \u003d base.getMnemo();\r\n    let currentDocument \u003d EntityFactory.createDocument(targetMnemo);\r\n    let docMnemo \u003d currentDocument.getMnemo();\r\n\r\n    currentDocument.setParent(base);\r\n    currentDocument.setNumber(\u0027001\u0027);  \r\n    currentDocument.setOrganization(base.getOrganization()); \r\n    \r\n    switch (baseMnemo) {\r\n        case MODULEMNEMO + \u0027.SchetafakturyVydannye\u0027:\r\n            /* Из шапки Счета-фактуры выданного в шапку Накладной на сторону\r\n               Организация -\u003e Организация, Банковские реквизиты организации -\u003e Банковские реквизиты учетной организации, \r\n               Сумма -\u003e Сумма, МОЛ -\u003e МОЛ, Подразделение -\u003e Подразделение, Покупатель -\u003e Получатель, \r\n               Банковские реквизиты контрагента -\u003e Банковские реквизиты контрагента, Грузополучатель -\u003e Грузополучатель, \r\n               Грузоотправитель -\u003e Грузоотправитель, Дополнение -\u003e Основание\r\n            */\r\n            copyFieldValuesHr(base, \r\n                              currentDocument, \r\n                              [[\u0027BankovskieRekvizityUchetnoiiOrganizacii\u0027, \u0027BankovskieRekvizityOrganizacii\u0027], \u0027Summa\u0027, \u0027MOL\u0027, \u0027Podrazdelenie\u0027, [\u0027Poluchatel\u0027, \u0027Pokupatel\u0027],  [\u0027Primechanie\u0027, \u0027NaznacheniePlatezha\u0027], \u0027BankovskieRekvizityKontragenta\u0027, \u0027Gruzopoluchatel\u0027, [\u0027Gruzootpravitelkontragent\u0027, \u0027Gruzootpravitel\u0027], [\u0027Osnovanie\u0027, \u0027Dopolnenie\u0027]]);             \r\n\r\n\r\n           \r\n            /* Из шапки в фактуру \r\n               КВФО -\u003e КВФО\r\n            */\r\n\r\n            let kvfo \u003d base.get(baseMnemo + \u0027.hr.KVFO\u0027);\r\n \r\n            /* \r\n               Из фактуры в фактуру\r\n               ТМЦ -\u003e ТМЦ, Количество -\u003e Количество, Цена -\u003e Цена, Цена с НДС -\u003e Цена с НДС, \r\n               Сумма без НДС -\u003e Сумма без НДС, НДС% -\u003e НДС%, Сумма НДС -\u003e Сумма НДС, Всего с НДС -\u003e Всего с НДС, \r\n               Себестоимость (без НДС) -\u003e Себестоимость, Акциз в т.ч. -\u003e Акциз в т.ч., \r\n               Товаропроизводитель -\u003e Товаропроизводитель, № ГТД -\u003e № ГТД\r\n            */ \r\n            for (let tableRec of base.getRows()){\r\n                let row \u003d  currentDocument.addTableRow();\r\n\r\n                row.put(docMnemo + \u0027.tr.KVFO\u0027, kvfo);\r\n\r\n                copyFieldValuesTr(tableRec, row, baseMnemo, docMnemo,\r\n                    [\u0027TMC\u0027, \u0027Kolichestvo\u0027, \u0027Cena\u0027, \u0027CenaSNDS\u0027, \u0027SummaBezNDS\u0027, \u0027NDS\u0027, \u0027SummaNDS\u0027, \u0027VsegoSNDS\u0027, [\u0027Sebestoimost\u0027, \u0027SebestoimostbezNDS\u0027], [\u0027AkcizVTch\u0027, \u0027AkcizVTch\u0027], \u0027Tovaroproizvoditel\u0027, [\u0027NGTD\u0027, \u0027GTD\u0027]]);           \r\n            }\r\n     \r\n            break;\r\n    }\r\n\r\n    currentDocument.save();\r\n    return currentDocument;\r\n}\r\n\r\n//После проведения документа - пишем в регистр\r\nfunction postActivate(currentDocument) {    \r\n    let docMnemo \u003d currentDocument.getMnemo();\r\n    let regName \u003d MODULEMNEMO + \u0027.OstatkiTMC\u0027;\r\n    let partia;\r\n    let mol;\r\n    let skl;\r\n    let sh;\r\n    \r\n    if (currentDocument.isActivated())  {\r\n        //ищем в справочнике подменные нулевые значения\r\n        let zeroPartia \u003d EntityFactory.getCatalogs().get(MODULEMNEMO + \u0027.Partii\u0027).findByCode(\u00270\u0027)[0]; \r\n        let zeroMol \u003d EntityFactory.getCatalogs().get(MODULEMNEMO + \u0027.Sotrudniki\u0027).findByCode(\u00270\u0027)[0];\r\n        let zeroSkl \u003d EntityFactory.getCatalogs().get(MODULEMNEMO + \u0027.Podrazdeleniya\u0027).findByCode(\u00270\u0027)[0];    \r\n    \r\n        for (let tableRec of currentDocument.getRows()){\r\n            sh \u003d tableRec.get(docMnemo + \u0027.tr.Kredit\u0027);\r\n            //получаем значения аналитик кредита\r\n            partia \u003d getValOrZeroVal(sh, \u0027Partii\u0027, zeroPartia);\r\n            mol \u003d getValOrZeroVal(sh, \u0027Sotrudniki\u0027, zeroMol);\r\n            skl \u003d getValOrZeroVal(sh, \u0027Podrazdeleniya\u0027, zeroSkl);\r\n          \r\n            //заполняем регистр \r\n            FillRegistr(regName, currentDocument, [\u0027Schet\u0027, \u0027MOL\u0027, \u0027Sklad\u0027, \u0027Partiya\u0027, \u0027TMC\u0027], \r\n                                                  [sh, mol, skl, partia, tableRec.get(docMnemo + \u0027.tr.TMC\u0027)], \r\n                                                  [\u0027VidDvizheniya\u0027], \r\n                                                  [docMnemo], \r\n                                                  [\u0027Kolichestvo\u0027, \u0027Summa\u0027], \r\n                                                  [-tableRec.get(docMnemo + \u0027.tr.Kolichestvo\u0027) , -tableRec.get(docMnemo + \u0027.tr.SummaBezNDS\u0027)]);\r\n        \r\n        }    \r\n    }\r\n}\r\n\r\n//После снятия с проведения документа - удаляем из регистра\r\nfunction postDeactivate(currentDocument) {\r\n    //Удаляем регистры при снятии с проведения\r\n    let docMnemo \u003d currentDocument.getMnemo();\r\n    let regName \u003d MODULEMNEMO + \u0027.OstatkiTMC\u0027;\r\n    \r\n    let sh_cap \u003d regName + \u0027.dm.Schet\u0027;\r\n    let mol_cap \u003d regName + \u0027.dm.MOL\u0027;\r\n    let skl_cap \u003d regName + \u0027.dm.Sklad\u0027;\r\n    let part_cap \u003d regName + \u0027.dm.Partiya\u0027;\r\n    let tmc_cap \u003d regName + \u0027.dm.TMC\u0027;   \r\n            \r\n    let sh;\r\n    let mol;\r\n    let skl;    \r\n    let part;\r\n    let tmc;\r\n    \r\n    req1 \u003d regName + \u0027.rg.VidDvizheniya\u0027;\r\n    \r\n    let condition;\r\n    let myReg;\r\n    \r\n    //ищем в справочнике подменные нулевые значения\r\n    let zeroPartia \u003d EntityFactory.getCatalogs().get(MODULEMNEMO + \u0027.Partii\u0027).findByCode(\u00270\u0027)[0]; \r\n    let zeroMol \u003d EntityFactory.getCatalogs().get(MODULEMNEMO + \u0027.Sotrudniki\u0027).findByCode(\u00270\u0027)[0];\r\n    let zeroSkl \u003d EntityFactory.getCatalogs().get(MODULEMNEMO + \u0027.Podrazdeleniya\u0027).findByCode(\u00270\u0027)[0];  \r\n    \r\n    for (let tableRec of currentDocument.getRows()){\r\n         sh \u003d tableRec.get(docMnemo + \u0027.tr.Kredit\u0027);\r\n         //получаем партию из аналитики кредита         \r\n         part \u003d getValOrZeroVal(sh, \u0027Partii\u0027, zeroPartia);\r\n         mol \u003d getValOrZeroVal(sh, \u0027Sotrudniki\u0027, zeroMol);\r\n         skl \u003d getValOrZeroVal(sh, \u0027Podrazdeleniya\u0027, zeroSkl);         \r\n        \r\n         condition \u003d new filter().dimension(sh_cap, sh).and().dimension(mol_cap, mol).and().dimension(skl_cap, skl).and().dimension(part_cap, part).and().dimension(tmc_cap, tmc).and().requisite(req1, docMnemo);\r\n         \r\n         myReg \u003d Register.get(regName);\r\n         myReg.delete(condition);          \r\n    }   \r\n}"
  },
  "algorithms": [
    {
      "mnemo": "Razrabotka.NakladnyeNaStoronu.UchetNakladnoiiNaStoronuMZ"
    }
  ],
  "printedformset": [],
  "grants": {},
  "meta": {
    "mnemo": "Razrabotka.NakladnyeNaStoronu",
    "title": {
      "ru_RU": "Накладные на сторону",
      "en_EN": "Nakladnye na storonu"
    },
    "description": {}
  }
}